<UserControl x:Class="NetworkService.Views.MeasurementGraphView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NetworkService.Views"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="800">

    <UserControl.Resources>

        <SolidColorBrush x:Key="UIPrimaryColor" Color="#FFE0E0E0"/>
        <SolidColorBrush x:Key="UISecondaryColor" Color="#1B1B1B"/>
        <SolidColorBrush x:Key="UIAccentColor" Color="#FF0078D7"/>
        <SolidColorBrush x:Key="UIAccentLightColor" Color="#FF3D9AD1"/>
        <SolidColorBrush x:Key="UITertiaryColor" Color="#FF3E3E42"/>
        <SolidColorBrush x:Key="CardBackgroundColor" Color="#FF0078D7"/>
        <SolidColorBrush x:Key="PanelBackgroundColor" Color="#FF1E1E1E"/>
        <SolidColorBrush x:Key="ErrorColor" Color="#FFFF5252"/>
        <SolidColorBrush x:Key="SuccessColor" Color="#FF4CAF50"/>
        <SolidColorBrush x:Key="LabelColor" Color="#FFCCCCCC"/>
        <SolidColorBrush x:Key="BorderColor" Color="#FF2D2D30"/>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource UIPrimaryColor}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="InputTextBoxStyle" TargetType="TextBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="#FF2D2D30"/>
            <Setter Property="Foreground" Value="{StaticResource UIPrimaryColor}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="CaretBrush" Value="{StaticResource UIAccentColor}"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource UIAccentColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="InputComboBoxStyle" TargetType="ComboBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="{StaticResource CardBackgroundColor}"/>
            <Setter Property="Foreground" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8"/>
        </Style>

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="DemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource UIPrimaryColor}"/>
            <Setter Property="Background" Value="{StaticResource UIAccentColor}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource UIAccentLightColor}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="{StaticResource UITertiaryColor}"/>
                    <Setter Property="Foreground" Value="{StaticResource LabelColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SmallTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{StaticResource LabelColor}"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Margin" Value="0,5,0,0"/>
        </Style>

    </UserControl.Resources>

    <Grid Background="{StaticResource PanelBackgroundColor}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="400"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="{StaticResource UISecondaryColor}" Padding="15">

            <StackPanel>

                <Border Background="{StaticResource CardBackgroundColor}" CornerRadius="6" Margin="0,0,0,20" Padding="10">
                    <StackPanel>
                        <TextBlock Text="Select Server" Style="{StaticResource SectionHeaderStyle}" TextAlignment="Center"/>
                        <ComboBox x:Name="ServerComboBox"
                                      ItemsSource="{Binding AllServers}"
                                      SelectedItem="{Binding SelectedServer, Mode=TwoWay}"
                                      DisplayMemberPath="ServerName"
                                      Style="{StaticResource InputComboBoxStyle}"
                                      Margin="0,10,0,0">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding UpdateSelectedServerCommand}"
                                                               CommandParameter="{Binding SelectedItem, ElementName=ServerComboBox}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ComboBox>
                    </StackPanel>
                </Border>

                <Border Background="#FF2D2D30" CornerRadius="6" Padding="0" Height="170">
                    <StackPanel>
                        <Border Background="{StaticResource CardBackgroundColor}" CornerRadius="6" Padding="2">
                            <TextBlock Text="Terminal" HorizontalAlignment="Center" Margin="10" VerticalAlignment="Center" Style="{StaticResource SectionHeaderStyle}" TextAlignment="Center"/>
                        </Border>
                        <TextBox Text="{Binding TerminalText, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource InputTextBoxStyle}" 
                                     Height="80" Margin="0,10,0,5"
                                     VerticalContentAlignment="Center"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     TextAlignment="Center" HorizontalContentAlignment="Center"/>
                        <TextBlock TextAlignment="Center" Style="{StaticResource SmallTextStyle}">Tip: type the ServerID<Run Text="g" FontWeight="Bold"/> for its graph
                        </TextBlock>


                    </StackPanel>
                </Border>

                <Button Content="Undo" Command="{Binding UndoCommand}" 
                         Style="{StaticResource PrimaryButtonStyle}" 
                         Width="100" Height="30" 
                         HorizontalAlignment="Center" Margin="30"/>
            </StackPanel>
        </Border>

        <Grid Grid.Column="1" Background="{StaticResource UISecondaryColor}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="1" Background="{StaticResource BorderColor}" CornerRadius="6" Margin="15">
                <Canvas x:Name="GraphCanvas" ClipToBounds="True" Height="350">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Loaded">
                            <i:InvokeCommandAction Command="{Binding InitializeGraphCommand}" 
                                                   CommandParameter="{Binding ElementName=GraphCanvas}" />
                        </i:EventTrigger>
                        <i:EventTrigger EventName="SizeChanged">
                            <i:InvokeCommandAction Command="{Binding CanvasSizeChangedCommand}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Canvas>
            </Border>

        </Grid>
    </Grid>
</UserControl>
